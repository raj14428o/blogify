<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('./partials/head') %>
  <title><%= profileUser.fullName %>'s Profile</title>
</head>
<body>
  <%- include('./partials/nav') %>

  <div class="container mt-4">

    <!-- ðŸ‘¤ User Info Card -->
<div class="card p-3 mb-4 shadow-sm">
  <div class="row g-0 align-items-center">
    <div class="col-auto">
      <img src="<%= profileUser.profileImageUrl %>" 
           width="80" 
           class="rounded-circle border" 
           alt="User Avatar">
    </div>
    <div class="col">
      <h4 class="mb-1 fw-semibold"><%= profileUser.fullName %></h4>
      <p class="text-muted mb-1"><%= profileUser.email %></p>
      <span class="badge bg-secondary"><%= profileUser.role %></span>
    </div>
  </div>
</div>

<div class="container mt-4">
  <div class="row">
    
    <!-- ðŸ“ Blogs Column -->
    <div class="col-md-6">
      <h4 class="mb-3">Blogs by <%= profileUser.fullName %> (<%= blogs.length %>)</h4>
      <% if (blogs.length === 0) { %>
        <p class="text-muted">No blogs published yet.</p>
      <% } else { %>
        <% blogs.forEach(blog => { %>
          <div class="card mb-2 shadow-sm">
            <div class="row g-0 align-items-center">
              <div class="col-auto">
                <img src="<%= blog.coverImageURL %>" 
                     class="img-fluid rounded-start" 
                     style="width:80px; height:80px; object-fit:cover;" 
                     alt="Cover">
              </div>
              <div class="col">
                <div class="card-body py-2 px-3">
                  <h6 class="card-title mb-1">
                    <a href="/blog/<%= blog._id %>" class="text-decoration-none fw-semibold">
                      <%= blog.title %>
                    </a>
                  </h6>
                  <p class="card-text text-muted small mb-0">
                    <%= blog.createdAt.toDateString() %>
                  </p>
                </div>
              </div>
            </div>
          </div>
        <% }) %>
      <% } %>
    </div>

    <!-- ðŸ’¬ Comments Column -->
    <div class="col-md-6">
      <h4 class="mb-3">Comments by <%= profileUser.fullName %> (<%= comments.length %>)</h4>
      <% if (comments.length === 0) { %>
        <p class="text-muted">No comments posted yet.</p>
      <% } else { %>
        <% comments.forEach(comment => { %>
          <div class="card mb-2 p-2 shadow-sm">
            <p class="mb-1 small">
              <strong>On blog:</strong> 
              <a href="/blog/<%= comment.blogId %>" class="text-decoration-none">
                <%= comment.blogTitle %>
              </a>
            </p>
            <pre class="mb-0 small" style="white-space:pre-wrap;"><%= comment.content %></pre>
          </div>
        <% }) %>
      <% } %>
    </div>

  </div>
</div>

    