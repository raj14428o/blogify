<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('./partials/head') %>
  <title><%= profileUser.fullName %>'s Profile</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Primary UI Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Comments Font -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">

  <style>
    /* ===== Base Reset ===== */
    html, body {
      width: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      color: #111827;
      background: #f5f6f8;
    }

    /* ===== Page Wrapper ===== */
    .profile-page {
      background: #ffffff;
      width: 100vw;
      min-height: 100vh;
      padding: 2.5rem 3rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.06);
    }

    /* ===== Profile Header ===== */
    .profile-header {
      padding-bottom: 2rem;
      border-bottom: 1px solid #e5e7eb;
      margin-bottom: 2.5rem;
    }

    .profile-avatar {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      background-color: #e5e7eb;
    }

    .profile-name {
      font-size: 1.9rem;
      font-weight: 700;
      letter-spacing: -0.02em;
    }

    /* ===== Pill Style Buttons (Option 2) ===== */
.profile-actions .pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  border-radius: 999px;
  font-weight: 600;
  font-size: 0.95rem;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
}

.profile-actions .pill-edit {
  background: #bdc7e6;
  color: #4338ca;
}

.profile-actions .pill-share {
  background: #b7b7b7;
  color: #374151;
  border: 1px dashed #d1d5db;
}

.profile-actions .pill-follow {
  background: #2563eb;
  color: white;
}

.profile-actions .pill-message {
  background: #f3f4f6;
  color: #374151;
}

.profile-actions .pill:hover {
  transform: translateY(-1px);
}

    .profile-email {
      font-size: 0.9rem;
      color: #6b7280;
    }

    .profile-actions button {
      font-size: 0.95rem;
      padding: 10px 22px;
      border-radius: 10px;
      font-weight: 600;
      min-width: 120px;
    }

    /* ===== Stats ===== */
    .profile-stats {
      display: flex;
      gap: 3rem;
      margin-top: 1.25rem;
    }

    .profile-stats span {
      display: flex;
      flex-direction: column;
      font-size: 0.9rem;
      color: #6b7280;
    }

    .profile-stats span strong {
      font-size: 1.5rem;
      font-weight: 700;
      color: #111827;
      line-height: 1.1;
    }

    /* ===== Sections ===== */
    .content-section {
      padding: 1.5rem 0;
    }

    .section-title {
      font-size: 1.15rem;
      font-weight: 600;
      margin-bottom: 1.2rem;
      letter-spacing: -0.01em;
    }

    /* ===== Posts Section ===== */
    .blogs-section {
      border-left: 4px solid #2563eb;
      padding-left: 1.5rem;
    }

    .blogs-section .section-title {
      font-size: 1.25rem;
      font-weight: 700;
    }

    .profile-blog-card {
      display: flex;
      gap: 1.25rem;
      align-items: center;
      padding: 1.1rem 0;
      border-bottom: 1px solid #eef2f7;
    }

    .profile-blog-card:last-child {
      border-bottom: none;
    }

    .profile-blog-card img {
      width: 110px;
      height: 75px;
      border-radius: 10px;
      object-fit: cover;
      background-color: #f1f3f5;
    }

    .profile-blog-card a {
      text-decoration: none;
      color: #1d4ed8;
      font-weight: 600;
    }

    .profile-blog-card a:hover {
      text-decoration: underline;
    }

    /* ===== Comments Section ===== */
    .comments-section {
      border-left: 3px solid #10b981;
      padding-left: 1.25rem;
      font-family: 'Roboto', system-ui, sans-serif;
    }

    .comments-section .section-title {
      font-family: 'Inter', sans-serif;
      font-size: 1.05rem;
      font-weight: 600;
      color: #374151;
    }

    .comment-item {
      font-size: 0.92rem;
      line-height: 1.5;
      color: #374151;
      margin-bottom: 1.25rem;
    }

    .comment-item:last-child {
      margin-bottom: 0;
    }

    .comment-item a {
      font-weight: 500;
    }
  </style>
</head>

<body>
  <%- include('./partials/nav') %>

  <div class="container-fluid p-0 m-0">
    <div class="profile-page">

      <!-- ðŸ‘¤ PROFILE HEADER -->
      <div class="profile-header">
        <div class="row align-items-center">
          <div class="col-auto">
            <img 
              src="<%= profileUser.profileImageUrl %>" 
              alt="Profile Avatar"
              class="profile-avatar">
          </div>

          <div class="col">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <div class="profile-name"><%= profileUser.fullName %></div>
                <div class="profile-email"><%= profileUser.email %></div>
              </div>

              <div class="profile-actions d-flex gap-2">

  <% if (user && user._id.toString() === profileUser._id.toString()) { %>
    
   <a href="/profile/edit" class="pill pill-edit">
   Edit Profile
</a>

<button 
  class="pill pill-share"
  onclick="shareProfile()"
>
   Share Profile
</button>



  <% } else { %>

   
    <button class="btn btn-primary">
      Follow
    </button>

    <button class="btn btn-outline-secondary">
      Message
    </button>

  <% } %>

</div>
            </div>

            <div class="profile-stats">
              <span><strong><%= blogs.length %></strong> posts</span>
              <span><strong>0</strong> followers</span>
              <span><strong>0</strong> following</span>
            </div>
          </div>
        </div>
      </div>

      
      <div class="row g-5">

        <!-- ðŸ“ POSTS -->
        <div class="col-md-8">
          <div class="content-section blogs-section">
            <div class="section-title">Posts</div>

            <% if (blogs.length === 0) { %>
              <p class="text-muted">No posts published yet.</p>
            <% } else { %>
              <% blogs.forEach(blog => { %>
                <div class="profile-blog-card">
                  <img src="<%= blog.coverImageURL %>" alt="Cover">
                  <div>
                    <a href="/blog/<%= blog._id %>"><%= blog.title %></a>
                    <div class="text-muted small">
                      <%= blog.createdAt.toDateString() %>
                    </div>
                  </div>
                </div>
              <% }) %>
            <% } %>
          </div>
        </div>

        <!-- ðŸ’¬ COMMENTS -->
        <div class="col-md-4">
          <div class="content-section comments-section">
            <div class="section-title">Comments</div>

            <% if (comments.length === 0) { %>
              <p class="text-muted">No comments posted yet.</p>
            <% } else { %>
              <% comments.forEach(comment => { %>
                <div class="comment-item">
                  <div class="small text-muted mb-1">
                    On 
                    <a href="/blog/<%= comment.blogId %>" class="text-decoration-none">
                      <%= comment.blogTitle %>
                    </a>
                  </div>
                  <div><%= comment.content %></div>
                </div>
              <% }) %>
            <% } %>
          </div>
        </div>

      </div>
    </div>
  </div>

  <%- include('./partials/scripts') %>
</body>
<script>
 function shareProfile(btn) {
  if (navigator.share) {
    navigator.share({
      title: document.title,
      text: 'Check out this profile',
      url: window.location.href
    }).catch(() => {});
  } else {
    navigator.clipboard.writeText(window.location.href);
    const oldText = btn.innerText;
    btn.innerText = "Copied âœ“";
    setTimeout(() => btn.innerText = oldText, 1500);
  }
}

</script>
</html>



    